var S=Object.defineProperty;var _=(i,t,o)=>t in i?S(i,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[t]=o;var h=(i,t,o)=>_(i,typeof t!="symbol"?t+"":t,o);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function o(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(e){if(e.ep)return;e.ep=!0;const n=o(e);fetch(e.href,n)}})();class a{constructor(t,o,r,e){h(this,"x");h(this,"y");h(this,"width");h(this,"height");this.x=t,this.y=o,this.width=r,this.height=e}isIntersectedWith(t){const o=[{x:this.x,y:this.y},{x:this.x+this.width,y:this.y},{x:this.x,y:this.y+this.height},{x:this.x+this.width,y:this.y+this.height}];for(const e of o)if(t.x<=e.x&&e.x<=t.x+t.width&&t.y<=e.y&&e.y<=t.y+t.height)return!0;const r=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x,y:t.y+t.height},{x:t.x+t.width,y:t.y+t.height}];for(const e of r)if(this.x<=e.x&&e.x<=this.x+this.width&&this.y<=e.y&&e.y<=this.y+this.height)return!0;return!1}}class p extends a{constructor(o,{x:r,y:e,width:n,height:s,color:c,borderRadius:d}){super(r,e,n,s);h(this,"context");h(this,"color");h(this,"borderRadius");this.context=o,this.color=c,this.borderRadius=d}updatePosition(o,r){this.x=o,this.y=r,this.render()}render(){const{context:o,color:r,x:e,y:n,width:s,height:c,borderRadius:d}=this;o.beginPath(),o.fillStyle=r,o.roundRect(e,n,s,c,d),o.fill(),o.globalAlpha=.15;const l=Math.min(s*.1,c*.2);o.beginPath(),o.fillStyle="white",o.roundRect(e+l,n+l,s-2*l,c-2*l,d),o.fill(),o.globalAlpha=1}}class b extends p{constructor(o,r,e){const n=o.getContext("2d");super(n,{x:r,y:e,width:10,height:10,color:"white",borderRadius:10});h(this,"speed");h(this,"angle");this.x=r,this.y=e,this.speed=200,this.angle=Math.PI/4+Math.random()*Math.PI/2}updatePosition(o){const{x:r,y:e,speed:n,angle:s}=this;super.updatePosition(r+o*n*Math.cos(s),e-o*n*Math.sin(s))}horizontalHit(){this.angle=Math.PI*2-this.angle}verticalHit(){this.angle=Math.PI-this.angle}}function N(i){const t=i.getContext("2d");if(!t)throw new Error("Canvas has no 2D context");t.clearRect(0,0,i.width,i.height)}const D=i=>{const t=Math.floor(Math.random()*i.length);return i[t]},T=new Map([["red","#d60025"],["pink","#cf3d60"],["yellow","#ffad2c"],["green","#00a51f"],["blue","#006aaa"],["dark","#03175c"]]),H=()=>D(Array.from(T.values())),X=()=>{const i=new Map(T);return i.delete("dark"),D(Array.from(i.values()))},v=(i,t)=>{let o=null;return(...r)=>{clearTimeout(o),o=window.setTimeout(()=>{i(...r)},t)}};function U(i){const t=i.getContext("2d");if(!t)throw new Error("Canvas 2D context is null");t.beginPath(),t.rect(0,0,i.width,i.height),t.fillStyle="rgba(255, 255, 255, 0.7)",t.fill(),t.fillStyle="#03175c",t.font="bold 48px Tahoma",t.textAlign="center",t.fillText("ARCANOID",i.width/2,i.height/2);const o=window.matchMedia("(pointer: coarse)").matches;t.fillStyle="#414d75",t.font="24px Tahoma",t.textAlign="center",t.fillText(o?"Tap to continue":"Press any key to continue",i.width/2,i.height/2+48)}class z extends p{constructor(t,o){const r=t.getContext("2d");if(!r)throw new Error("Canvas 2D context is null");super(r,o)}checkIfIntersectedByBall(t){if(this.isIntersectedWith(t)){const{x:o,y:r,width:e,height:n}=this,s=new a(o-10,r-10,10+e,10),c=new a(o-e,r-10,10,10+n),d=new a(o,r+n,e+10,10),l=new a(o-10,r,10,n+10);return(t.isIntersectedWith(s)||t.isIntersectedWith(d))&&t.horizontalHit(),(t.isIntersectedWith(c)||t.isIntersectedWith(l))&&t.verticalHit(),!0}return!1}}function E(i){const t=[],e=Math.floor(i.width/50)-2,n=Math.floor(i.height*.5/20),s=Math.floor((i.width-e*50)/2);for(let c=0;c<e;c++)for(let d=0;d<n;d++){const l=H();t.push(new z(i,{x:s+50*c,y:s+20*d,width:50,height:20,color:l}))}return t}function Y(i,t){const o=i.indexOf(t);o>=0?i.splice(o,1):i.push(t)}class C extends p{constructor(o,r,e){const n=o.getContext("2d");if(!n)throw new Error("Canvas 2D context is null");super(n,{x:r,y:e,width:150,height:20,color:X(),borderRadius:5});h(this,"canvas");h(this,"speed");h(this,"leftKey");h(this,"rightKey");this.canvas=o,this.speed=300,this.leftKey=!1,this.rightKey=!1}moveLeft(o){const{x:r,speed:e}=this;this.x=Math.max(0,r-o*e)}moveRight(o){const{canvas:r,width:e,x:n,speed:s}=this;this.x=Math.min(r.width-e,n+o*s)}checkIfIntersectedWithBall(o){if(o.isIntersectedWith(this)){const e=(o.x+o.width/2-this.x)/this.width;o.angle=Math.PI-Math.PI*.8*(e+.05)}}}class q{constructor(t,o,r,e){h(this,"up");h(this,"right");h(this,"down");h(this,"left");this.up=t,this.right=o,this.down=r,this.left=e}}const k=i=>{let r=750,e=new b(i,i.width/2,i.height-50),n=new C(i,i.width/2-100,i.height-30),s=E(i),c,d;const l=new q(new a(0,-10,i.width,10),new a(i.width,0,10,i.height),new a(0,i.height,i.width,10),new a(-10,0,10,i.height)),M=()=>{y=!0,e=new b(i,i.width/2,i.height-50),n=new C(i,i.width/2-100,i.height-30),s=E(i)},W=f=>{f.key==="ArrowUp"&&(r=250),f.key==="ArrowLeft"&&(n.leftKey=!0),f.key==="ArrowRight"&&(n.rightKey=!0),y||M()},I=f=>{f.key==="ArrowUp"&&(r=750),f.key==="ArrowLeft"&&(n.leftKey=!1),f.key==="ArrowRight"&&(n.rightKey=!1)};document.addEventListener("keydown",W),document.addEventListener("keyup",I);const L=f=>{y||M();const u=f.targetTouches.item(0);u&&(c=u.clientX,d=u.clientY)},A=f=>{if(!c||!d)return;const u=f.targetTouches.item(0);if(!u)return;const w=Math.abs(Math.min(u.clientY-d,0));if(r=Math.max(750-w*3,250),u.clientX>c){n.leftKey=!1,n.rightKey=!0;return}if(u.clientX<c){n.rightKey=!1,n.leftKey=!0;return}},O=()=>{n.rightKey=!1,n.leftKey=!1,r=750,c=void 0,d=void 0};document.addEventListener("touchstart",L),document.addEventListener("touchmove",A),document.addEventListener("touchend",O);let m=0,y=!1,P=!1;return function f(u){if(!P){if(requestAnimationFrame(f),N(i),y){const x=Math.min(16.7,u-m)/r;m=u,e.updatePosition(x),n.leftKey&&n.moveLeft(x),n.rightKey&&n.moveRight(x);for(const K of s)K.checkIfIntersectedByBall(e)&&Y(s,K);e.isIntersectedWith(l.up)&&e.horizontalHit(),(e.isIntersectedWith(l.right)||e.isIntersectedWith(l.left))&&e.verticalHit(),e.isIntersectedWith(l.down)&&(y=!1),n.checkIfIntersectedWithBall(e)}n.render();for(const w of s)w.render();y||U(i)}}(m),()=>{P=!0,document.removeEventListener("keydown",W),document.removeEventListener("keyup",I),document.removeEventListener("touchstart",L),document.removeEventListener("touchmove",A),document.removeEventListener("touchend",O)}},g=document.createElement("canvas");g.width=document.body.clientWidth;g.height=document.body.clientHeight;document.body.appendChild(g);let R=k(g);const F=v(()=>{R(),g.width=document.body.clientWidth,g.height=document.body.clientHeight,R=k(g)},50);window.addEventListener("resize",F);
