var _=Object.defineProperty;var k=(e,t,s)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var c=(e,t,s)=>k(e,typeof t!="symbol"?t+"":t,s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function s(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(i){if(i.ep)return;i.ep=!0;const n=s(i);fetch(i.href,n)}})();class y{constructor(t,s,o,i){c(this,"x");c(this,"y");c(this,"width");c(this,"height");this.x=t,this.y=s,this.width=o,this.height=i}isIntersectedWith(t){const s=[{x:this.x,y:this.y},{x:this.x+this.width,y:this.y},{x:this.x,y:this.y+this.height},{x:this.x+this.width,y:this.y+this.height}];for(const i of s)if(t.x<=i.x&&i.x<=t.x+t.width&&t.y<=i.y&&i.y<=t.y+t.height)return!0;const o=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x,y:t.y+t.height},{x:t.x+t.width,y:t.y+t.height}];for(const i of o)if(this.x<=i.x&&i.x<=this.x+this.width&&this.y<=i.y&&i.y<=this.y+this.height)return!0;return!1}}class P extends y{constructor(s,{x:o,y:i,width:n,height:r,color:h,borderRadius:d}){super(o,i,n,r);c(this,"context");c(this,"color");c(this,"borderRadius");this.context=s,this.color=h,this.borderRadius=d}updatePosition(s,o){this.x=s,this.y=o,this.render()}render(){const{context:s,color:o,x:i,y:n,width:r,height:h,borderRadius:d}=this;s.beginPath(),s.fillStyle=o,s.roundRect(i,n,r,h,d),s.fill(),s.globalAlpha=.15;const a=Math.min(r*.1,h*.2);s.beginPath(),s.fillStyle="white",s.roundRect(i+a,n+a,r-2*a,h-2*a,d),s.fill(),s.globalAlpha=1}}class O extends P{constructor(s,o,i){const n=s.getContext("2d");super(n,{x:o,y:i,width:10,height:10,color:"white",borderRadius:10});c(this,"speed");c(this,"angle");this.x=o,this.y=i,this.speed=200,this.angle=Math.PI/4+Math.random()*Math.PI/2}updatePosition(s){const{x:o,y:i,speed:n,angle:r}=this;super.updatePosition(o+s*n*Math.cos(r),i-s*n*Math.sin(r))}horizontalHit(){this.angle=Math.PI*2-this.angle}verticalHit(){this.angle=Math.PI-this.angle}}class N extends P{constructor(t,s){const o=t.getContext("2d");if(!o)throw new Error("Canvas 2D context is null");super(o,s)}checkIfIntersectedByBall(t){if(this.isIntersectedWith(t)){const{x:s,y:o,width:i,height:n}=this,r=new y(s-10,o-10,10+i,10),h=new y(s-i,o-10,10,10+n),d=new y(s,o+n,i+10,10),a=new y(s-10,o,10,n+10);return(t.isIntersectedWith(r)||t.isIntersectedWith(d))&&t.horizontalHit(),(t.isIntersectedWith(h)||t.isIntersectedWith(a))&&t.verticalHit(),!0}return!1}}const w=e=>{const t=Math.floor(Math.random()*e.length);return e[t]},H=new Map([["red","#d60025"],["pink","#cf3d60"],["yellow","#f1931e"],["green","#00a51f"],["blue","#006aaa"],["dark","#03175c"]]),X=()=>w(Array.from(H.values())),U=()=>{const e=new Map(H);return e.delete("dark"),w(Array.from(e.values()))},z=e=>{const t=e.getContext("2d");if(!t)throw new Error("Canvas has no 2D context");t.clearRect(0,0,e.width,e.height)},q=e=>{const t=e.getContext("2d");if(!t)throw new Error("Canvas 2D context is null");t.beginPath(),t.rect(0,0,e.width,e.height),t.fillStyle="rgba(255, 255, 255, 0.7)",t.fill(),t.fillStyle="#03175c",t.font="bold 48px sans-serif",t.textAlign="center",t.fillText("ARCANOID",e.width/2,e.height/2);const s=window.matchMedia("(pointer: coarse)").matches;t.fillStyle="#414d75",t.font="24px sans-serif",t.textAlign="center",t.fillText(s?"Tap to continue":"Press any key to continue",e.width/2,e.height/2+48)},E=e=>{const t=[],i=Math.floor(e.width/50)-2,n=Math.floor(e.height*.5/20),r=Math.floor((e.width-i*50)/2);for(let h=0;h<i;h++)for(let d=0;d<n;d++){const a=X();t.push(new N(e,{x:r+50*h,y:r+20*d,width:50,height:20,color:a}))}return t},K=e=>{e.width=document.body.clientWidth,e.height=document.body.clientHeight},B=(e,t)=>{const s=e.indexOf(t);s>=0?e.splice(s,1):e.push(t)},G="/arcanoid/assets/1-Bc90hEPR.mp4",j="/arcanoid/assets/2-Czchu0Hg.mp4",Y="/arcanoid/assets/3-BKhEwKXH.mp4",F="/arcanoid/assets/4-B_69B_5q.mp4",Q="/arcanoid/assets/5-APtgz_mA.mp4",J="/arcanoid/assets/6-C32sA63T.mp4",Z="/arcanoid/assets/1-B1qub3ZV.mp4",$="/arcanoid/assets/2-RTWG2e9Q.mp4",tt="/arcanoid/assets/3-cTIsAIQx.mp4",et="/arcanoid/assets/4-Cyx0zRIo.mp4",st="/arcanoid/assets/5-BYJ73HRD.mp4",it="/arcanoid/assets/6-BI-qGPOA.mp4",ot="/arcanoid/assets/7-DGp1JTpS.mp4",nt="/arcanoid/assets/8-CNLLQ59G.mp4",rt="/arcanoid/assets/9-BWRqjtDy.mp4",T=[G,j,Y,F,Q,J],V=[Z,$,tt,et,st,it,ot,nt,rt],ht=()=>w(T),ct=()=>w(V),dt=e=>e?ct():ht(),at=async()=>{const e=async u=>{try{const x=await(await fetch(u)).blob();return URL.createObjectURL(x)}catch(p){throw console.error(`Failed to load ${u} video. Reason: `,p),p}},[t,...s]=V,[o,...i]=T,[n,r]=await Promise.all([fetch(t),fetch(o)]),[h,d]=await Promise.all([n.blob(),r.blob()]),a=[URL.createObjectURL(h)],g=[URL.createObjectURL(d)];return setTimeout(()=>{i.forEach(u=>{e(u).then(p=>g.push(p))}),s.forEach(u=>{e(u).then(p=>a.push(p))})}),{sad:a,happy:g}};class v extends P{constructor(s,o,i){const n=s.getContext("2d");if(!n)throw new Error("Canvas 2D context is null");super(n,{x:o,y:i,width:150,height:20,color:U(),borderRadius:5});c(this,"canvas");c(this,"speed");c(this,"leftKey");c(this,"rightKey");this.canvas=s,this.speed=300,this.leftKey=!1,this.rightKey=!1}moveLeft(s){const{x:o,speed:i}=this;this.x=Math.max(0,o-s*i)}moveRight(s){const{canvas:o,width:i,x:n,speed:r}=this;this.x=Math.min(o.width-i,n+s*r)}checkIfIntersectedWithBall(s){if(s.isIntersectedWith(this)){const i=(s.x+s.width/2-this.x)/this.width;s.angle=Math.PI-Math.PI*.8*(i+.05)}}}class lt{constructor(t,s,o,i){c(this,"up");c(this,"right");c(this,"down");c(this,"left");this.up=t,this.right=s,this.down=o,this.left=i}}const D=(e,t)=>{let i=0,n=750,r=new O(e,e.width/2,e.height-50),h=new v(e,e.width/2-100,e.height-30),d=E(e),a,g;const u=new lt(new y(0,-10,e.width,10),new y(e.width,0,10,e.height),new y(0,e.height,e.width,10),new y(-10,0,10,e.height)),p=()=>{t.setSadMood(!0),t.play(),m=!0,r=new O(e,e.width/2,e.height-50),h=new v(e,e.width/2-100,e.height-30),d=E(e)},x=l=>{l.key==="ArrowUp"&&(n=250),l.key==="ArrowLeft"&&(h.leftKey=!0),l.key==="ArrowRight"&&(h.rightKey=!0),m||p()},I=l=>{l.key==="ArrowUp"&&(n=750),l.key==="ArrowLeft"&&(h.leftKey=!1),l.key==="ArrowRight"&&(h.rightKey=!1)};document.addEventListener("keydown",x),document.addEventListener("keyup",I);const W=l=>{m||p();const f=l.targetTouches.item(0);f&&(a=f.clientX,g=f.clientY)},b=l=>{if(!a||!g)return;const f=l.targetTouches.item(0);if(!f)return;const M=Math.abs(Math.min(f.clientY-g,0));if(n=Math.max(750-M*3,250),f.clientX>a){h.leftKey=!1,h.rightKey=!0;return}if(f.clientX<a){h.rightKey=!1,h.leftKey=!0;return}},R=()=>{h.rightKey=!1,h.leftKey=!1,n=750,a=void 0,g=void 0};document.addEventListener("touchstart",W),document.addEventListener("touchmove",b),document.addEventListener("touchend",R);let L=0,m=!1,A=!1;return function l(f){if(!A){if(requestAnimationFrame(l),z(e),m){const C=Math.min(16.7,f-L)/n;L=f,t.setSadMood(f-i>1e3),r.updatePosition(C),h.leftKey&&h.moveLeft(C),h.rightKey&&h.moveRight(C);for(const S of d)S.checkIfIntersectedByBall(r)&&(i=f,B(d,S));r.isIntersectedWith(u.up)&&r.horizontalHit(),(r.isIntersectedWith(u.right)||r.isIntersectedWith(u.left))&&r.verticalHit(),r.isIntersectedWith(u.down)&&(m=!1),h.checkIfIntersectedWithBall(r)}h.render();for(const M of d)M.render();m||(t.stop(),q(e))}}(L),()=>{A=!0,document.removeEventListener("keydown",x),document.removeEventListener("keyup",I),document.removeEventListener("touchstart",W),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",R)}};class ft{constructor(t,s){c(this,"isPlaying");c(this,"isSad");c(this,"video");c(this,"catVideosPreloaded");c(this,"playNext",()=>{this.video.src=this.getCatVideo(),this.play()});this.video=t,this.isSad=!0,this.isPlaying=!1,this.catVideosPreloaded=s,this.video.addEventListener("ended",this.playNext)}getCatVideo(){return w(this.catVideosPreloaded[this.isSad?"sad":"happy"])}async play(){this.isPlaying=!0,this.video.play()}stop(){this.isPlaying&&(this.isPlaying=!1,this.video.pause())}async setSadMood(t){t!==this.isSad&&(this.isSad=t,this.video.src=this.getCatVideo(),this.play())}}const ut=async()=>{var n;const e=await at(),t=document.createElement("video");t.id="memes-video",t.autoplay=!1,t.muted=!1,t.src=dt(!0),document.body.appendChild(t);const s=new ft(t,e),o=document.createElement("canvas");o.id="game-canvas",K(o),document.body.appendChild(o),(n=document.body.querySelector("#loader-wrapper"))==null||n.remove();let i=D(o,s);window.addEventListener("resize",()=>{s.stop(),i(),K(o),i=D(o,s)})};ut();
