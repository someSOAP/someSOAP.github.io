var z=Object.defineProperty;var G=(e,t,i)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var c=(e,t,i)=>G(e,typeof t!="symbol"?t+"":t,i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}})();class f{constructor(t,i,n,s){c(this,"x");c(this,"y");c(this,"width");c(this,"height");this.x=t,this.y=i,this.width=n,this.height=s}isIntersectedWith(t){const i=[{x:this.x,y:this.y},{x:this.x+this.width,y:this.y},{x:this.x,y:this.y+this.height},{x:this.x+this.width,y:this.y+this.height}];for(const s of i)if(t.x<=s.x&&s.x<=t.x+t.width&&t.y<=s.y&&s.y<=t.y+t.height)return!0;const n=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x,y:t.y+t.height},{x:t.x+t.width,y:t.y+t.height}];for(const s of n)if(this.x<=s.x&&s.x<=this.x+this.width&&this.y<=s.y&&s.y<=this.y+this.height)return!0;return!1}}class P extends f{constructor(i,{x:n,y:s,width:o,height:r,color:h,borderRadius:d}){super(n,s,o,r);c(this,"context");c(this,"color");c(this,"borderRadius");this.context=i,this.color=h,this.borderRadius=d}updatePosition(i,n){this.x=i,this.y=n,this.render()}render(){const{context:i,color:n,x:s,y:o,width:r,height:h,borderRadius:d}=this;i.beginPath(),i.fillStyle=n,i.roundRect(s,o,r,h,d),i.fill(),i.globalAlpha=.15;const a=Math.min(r*.1,h*.2);i.beginPath(),i.fillStyle="white",i.roundRect(s+a,o+a,r-2*a,h-2*a,d),i.fill(),i.globalAlpha=1}}class N extends P{constructor(i,n,s){const o=i.getContext("2d");super(o,{x:n,y:s,width:10,height:10,color:"white",borderRadius:10});c(this,"speed");c(this,"angle");this.x=n,this.y=s,this.speed=200,this.angle=Math.PI/4+Math.random()*Math.PI/2}updatePosition(i){const{x:n,y:s,speed:o,angle:r}=this;super.updatePosition(n+i*o*Math.cos(r),s-i*o*Math.sin(r))}horizontalHit(){this.angle=Math.PI*2-this.angle}verticalHit(){this.angle=Math.PI-this.angle}}class q extends P{constructor(t,i){const n=t.getContext("2d");if(!n)throw new Error("Canvas 2D context is null");super(n,i)}checkIfIntersectedByBall(t){if(this.isIntersectedWith(t)){const{x:i,y:n,width:s,height:o}=this,r=new f(i-10,n-10,10+s,10),h=new f(i-s,n-10,10,10+o),d=new f(i,n+o,s+10,10),a=new f(i-10,n,10,o+10);return(t.isIntersectedWith(r)||t.isIntersectedWith(d))&&t.horizontalHit(),(t.isIntersectedWith(h)||t.isIntersectedWith(a))&&t.verticalHit(),!0}return!1}}const M=e=>{const t=Math.floor(Math.random()*e.length);return e[t]},k=new Map([["red","#d60025"],["pink","#cf3d60"],["yellow","#f1931e"],["green","#00a51f"],["blue","#006aaa"],["dark","#03175c"]]),B=()=>M(Array.from(k.values())),U=()=>{const e=new Map(k);return e.delete("dark"),M(Array.from(e.values()))},V=e=>{const t=e.getContext("2d");if(!t)throw new Error("Canvas has no 2D context");t.clearRect(0,0,e.width,e.height)},Y=e=>{const t=e.getContext("2d");if(!t)throw new Error("Canvas 2D context is null");t.beginPath(),t.rect(0,0,e.width,e.height),t.fillStyle="rgba(255, 255, 255, 0.7)",t.fill(),t.fillStyle="#03175c",t.font="bold 48px sans-serif",t.textAlign="center",t.fillText("ARCANOID",e.width/2,e.height/2);const i=window.matchMedia("(pointer: coarse)").matches;t.fillStyle="#414d75",t.font="24px sans-serif",t.textAlign="center",t.fillText(i?"Tap to continue":"Press any key to continue",e.width/2,e.height/2+48)},T=e=>{const t=[],s=Math.floor(e.width/50)-2,o=Math.floor(e.height*.5/20),r=Math.floor((e.width-s*50)/2);for(let h=0;h<s;h++)for(let d=0;d<o;d++){const a=B();t.push(new q(e,{x:r+50*h,y:r+20*d,width:50,height:20,color:a}))}return t},v=e=>{e.width=document.body.clientWidth,e.height=document.body.clientHeight},Q=(e,t)=>{const i=e.indexOf(t);i>=0?e.splice(i,1):e.push(t)},j="/arcanoid/assets/1-Bc90hEPR.mp4",F="/arcanoid/assets/2-Czchu0Hg.mp4",J="/arcanoid/assets/3-BKhEwKXH.mp4",Z="/arcanoid/assets/4-B_69B_5q.mp4",$="/arcanoid/assets/5-APtgz_mA.mp4",tt="/arcanoid/assets/6-C32sA63T.mp4",et="/arcanoid/assets/1-B1qub3ZV.mp4",it="/arcanoid/assets/2-RTWG2e9Q.mp4",st="/arcanoid/assets/3-cTIsAIQx.mp4",ot="/arcanoid/assets/4-Cyx0zRIo.mp4",nt="/arcanoid/assets/5-BYJ73HRD.mp4",rt="/arcanoid/assets/6-BI-qGPOA.mp4",ht="/arcanoid/assets/7-DGp1JTpS.mp4",ct="/arcanoid/assets/8-CNLLQ59G.mp4",dt="/arcanoid/assets/9-BWRqjtDy.mp4",at=[j,F,J,Z,$,tt],lt=[et,it,st,ot,nt,rt,ht,ct,dt],ut=()=>M(at),ft=()=>M(lt),A=e=>e?ft():ut();class b extends P{constructor(i,n,s){const o=i.getContext("2d");if(!o)throw new Error("Canvas 2D context is null");super(o,{x:n,y:s,width:150,height:20,color:U(),borderRadius:5});c(this,"canvas");c(this,"speed");c(this,"leftKey");c(this,"rightKey");this.canvas=i,this.speed=300,this.leftKey=!1,this.rightKey=!1}moveLeft(i){const{x:n,speed:s}=this;this.x=Math.max(0,n-i*s)}moveRight(i){const{canvas:n,width:s,x:o,speed:r}=this;this.x=Math.min(n.width-s,o+i*r)}checkIfIntersectedWithBall(i){if(i.isIntersectedWith(this)){const s=(i.x+i.width/2-this.x)/this.width;i.angle=Math.PI-Math.PI*.8*(s+.05)}}}class pt{constructor(t,i,n,s){c(this,"up");c(this,"right");c(this,"down");c(this,"left");this.up=t,this.right=i,this.down=n,this.left=s}}const X=(e,t)=>{let s=0,o=750,r=new N(e,e.width/2,e.height-50),h=new b(e,e.width/2-100,e.height-30),d=T(e),a,m;const w=new pt(new f(0,-10,e.width,10),new f(e.width,0,10,e.height),new f(0,e.height,e.width,10),new f(-10,0,10,e.height)),C=()=>{t.setSadMood(!0),t.play(),p=!0,r=new N(e,e.width/2,e.height-50),h=new b(e,e.width/2-100,e.height-30),d=T(e)},O=l=>{l.key==="ArrowUp"&&(o=250),l.key==="ArrowLeft"&&(h.leftKey=!0),l.key==="ArrowRight"&&(h.rightKey=!0),p||C()},S=l=>{l.key==="ArrowUp"&&(o=750),l.key==="ArrowLeft"&&(h.leftKey=!1),l.key==="ArrowRight"&&(h.rightKey=!1)};document.addEventListener("keydown",O),document.addEventListener("keyup",S);const E=l=>{p||C();const u=l.targetTouches.item(0);u&&(a=u.clientX,m=u.clientY)},R=l=>{if(!a||!m)return;const u=l.targetTouches.item(0);if(!u)return;const x=Math.abs(Math.min(u.clientY-m,0));if(o=Math.max(750-x*3,250),u.clientX>a){h.leftKey=!1,h.rightKey=!0;return}if(u.clientX<a){h.rightKey=!1,h.leftKey=!0;return}},D=()=>{h.rightKey=!1,h.leftKey=!1,o=750,a=void 0,m=void 0};document.addEventListener("touchstart",E),document.addEventListener("touchmove",R),document.addEventListener("touchend",D);let I=0,p=!1,K=!1;return function l(u){if(!K){if(requestAnimationFrame(l),V(e),p){const W=Math.min(16.7,u-I)/o;I=u,t.setSadMood(u-s>1e3),r.updatePosition(W),h.leftKey&&h.moveLeft(W),h.rightKey&&h.moveRight(W);for(const H of d)H.checkIfIntersectedByBall(r)&&(s=u,Q(d,H));r.isIntersectedWith(w.up)&&r.horizontalHit(),(r.isIntersectedWith(w.right)||r.isIntersectedWith(w.left))&&r.verticalHit(),r.isIntersectedWith(w.down)&&(p=!1),h.checkIfIntersectedWithBall(r)}h.render();for(const x of d)x.render();p||(t.stop(),Y(e))}}(I),()=>{K=!0,document.removeEventListener("keydown",O),document.removeEventListener("keyup",S),document.removeEventListener("touchstart",E),document.removeEventListener("touchmove",R),document.removeEventListener("touchend",D)}};class yt{constructor(t){c(this,"isPlaying");c(this,"isSad");c(this,"video");c(this,"playNext",()=>{this.video.src=A(this.isSad),this.play()});this.video=t,this.isSad=!0,this.isPlaying=!1,this.video.addEventListener("ended",this.playNext)}async play(){this.isPlaying=!0,this.video.play()}stop(){this.isPlaying&&(this.isPlaying=!1,this.video.pause())}async setSadMood(t){t!==this.isSad&&(console.log("CHANGING MOOD TO ",t?"SAD":"HAPI"),this.isSad=t,this.video.src=A(t),this.play())}}const g=document.createElement("video");g.id="memes-video";g.autoplay=!1;g.muted=!1;g.src=A(!0);document.body.appendChild(g);const L=new yt(g),y=document.createElement("canvas");y.id="game-canvas";v(y);document.body.appendChild(y);let _=X(y,L);window.addEventListener("resize",()=>{L.stop(),_(),v(y),_=X(y,L)});
